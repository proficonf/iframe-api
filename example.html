<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <title>
        <%= htmlWebpackPlugin.options.title %>
    </title>
</head>

<body>
    <div class="buttons-container">
        <button id="enableCamera" onclick="enableCamera">EnableCamera</button>
        <button id="disableCamera" onclick="disableCamera">DisableCamera</button>

        <button id="enableMicrophone" onclick="enableMicrophone">EnableMicrophone</button>
        <button id="disableMicrophone" onclick="disableMicrophone">DisableMicrophone</button>
        <div style="height: 70px; overflow-y:scroll">
            <code id="log"></code>
        </div>
    </div>
    <div id="iframeWrapper"></div>

    <script type="text/javascript">
        let room;
        const meetingId = 'xYZrEk33D';
        const userName = 'John Doe';


        async function initializeRoom() {
            room = Proficonf.EmbeddedRoom.create({
                meetingId,
                rootElement: document.querySelector('div#iframeWrapper'),
                user: {
                    name: userName,
                    locale: 'en'
                },
                iframe: {
                    width: '100%',
                    height: '70vh',
                    style: {
                        border: '3px solid black',
                        backgroundColor: 'grey'
                    }
                }
            });

            room.on('*', (...args) =>{
                console.log('Event received', args);
            });

            await room.join();
        }

        function enableMicrophone(){
            room.enableMicrophone();
        }

        function disableMicrophone(){
            room.disableMicrophone();
        }

        function enableCamera(){
            return room.enableCamera();
        }

        function disableCamera(){
            return room.disableCamera();
        }

        (()=> initializeRoom())();
    </script>
</body>

</html>